container_commands:
    01_install_libs:
        command: "pip install -r requirements.txt"
    02_migrate:
        command: "django-admin.py migrate"
        leader_only: true
    03_collectstatic:
        command: "django-admin.py collectstatic --noinput"

    01_remove_existing_cron_job:
        command: "rm /etc/cron.d/cron_jobs || exit 0"
    02_add_cron_job:
        command: "cat .ebextensions/cron_job.txt > /etc/cron.d/cron_job && chmod 644 /etc/cron.d/cron_job"
        leader_only: true

option_settings:
    aws:elasticbeanstalk:application:environment:
        DJANGO_SETTINGS_MODULE: config.production